import{initializeApp as t}from"https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js";import{getAuth as o,signInWithEmailAndPassword as s}from"https://www.gstatic.com/firebasejs/9.0.2/firebase-auth.js";import{getFirestore as e,collection as n,doc as i,getDoc as d,getDocs as l,updateDoc as r,setDoc as c,deleteDoc as g,query as u,where as f}from"https://www.gstatic.com/firebasejs/9.0.2/firebase-firestore.js";class a{constructor(){t({apiKey:"AIzaSyC1k5fAwQU_mHZ_kS9WMsgBd6Nl1i_8Vb0",authDomain:"n-glot.firebaseapp.com",projectId:"n-glot",storageBucket:"n-glot.appspot.com",messagingSenderId:"947090572647",appId:"1:947090572647:web:0838cd9ead0b2d9659dbc2",measurementId:"G-E4GRM7Q8XG"});var a=o();this.db=e(),this.auth=a}async signIn(a,t){a&&t&&await s(this.auth,a,t)}async get_package(a,t="basic"){t=i(this.db,"languages",a,"packages",t);return(await d(t)).data()}async get_langs_meta(){var a={};for(const t of(await l(n(this.db,"languages"))).docs)a[t.id]=t.data();return a}async get_basic_funcs(a,t){var o={from:{},to:{convs:{},obj_mod_convs:{},func_call_convs:{},lib_convs:{}}};for(const s of(await l(n(this.db,"languages",a,"from"))).docs)"Coll-Bridge"!=s.id&&(o.from[s.id]=s.data());for(const e of(await l(n(this.db,"languages",t,"to","Coll-Bridge",a,"Coll-Bridge","reserved"))).docs)"Coll-Bridge"!=e.id&&(o.to[e.id]=e.data());for(const i of(await l(n(this.db,"languages",t,"to","Coll-Bridge",a,"Coll-Bridge","misc"))).docs)"Coll-Bridge"!=i.id&&(o.to.convs[i.id]=i.data());for(const d of(await l(n(this.db,"languages",t,"to","Coll-Bridge",a,"Coll-Bridge","obj_mod"))).docs)"Coll-Bridge"!=d.id&&(o.to.obj_mod_convs[d.id]=d.data());for(const r of(await l(n(this.db,"languages",t,"to","Coll-Bridge",a,"Coll-Bridge","func_call"))).docs)"Coll-Bridge"!=r.id&&(o.to.func_call_convs[r.id]=r.data());for(const c of(await l(n(this.db,"languages",t,"to","Coll-Bridge",a,"Coll-Bridge","lib_convs"))).docs)"Coll-Bridge"!=c.id&&(o.to.lib_convs[c.id]=c.data());return o}async get_docs_json(...a){var t,o={};for(t of(await l(n(this.db,...a))).docs)o[t.id]=t.data();return o}async get_doc_data(...a){return(await d(i(this.db,...a))).data()}get_collection(...a){return n(this.db,...a)}async list_docs(a){a=await l(a);console.log(a.docs.map(a=>a.data()))}async get_doc(...a){a=d(i(this.db,...a));return a.catch(function(a){console.error(a)}),a}async get_docs(...a){return l(...a)}async update_doc(a,...t){return r(i(this.db,...t),a)}async set_doc(a,...t){return c(i(this.db,...t),a)}async delete_doc(...a){return g(this.get_doc(...a))}get_query(a,t){return u(a,t)}where_constraint(a,t,o){return f(a,t,o)}}window.DBHandler=a;export{a as DBHandler};